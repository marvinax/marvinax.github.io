So the next step:

Create transform classes and move corresponding functions into that class

and create a shape class and move all grid/mesh/index generating function into it.